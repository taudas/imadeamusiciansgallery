<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I made a Musicians Gallery for $6</title>
</head>
<body style="background-color: #e7c9a9">
  <div>
    <h1>

<code><center>
I made a Musicians Gallery for $6
   with Cloudflare Stream and Cloudflare Pages
</center></code></h1>
<p>
I  was looking for a way to present a set of audio files. Iâ€™ve been learning a lot about serverless, and I thought this type of web app would be perfect for that.
<p>
So here is the challenge: Take a set of audio files and present a playable web interface.
<p>
I am familiar with Cloudflare Tunnels so I thought I would use Cloudflare Stream for the host. This service consists of two parts - storage and streaming. The storage cost is $5 per kilominute. The streaming cost is $1 per kilominute. So first you establish your content - 1000 minutes of storage for $5/month. Then you enable streaming - 1000 minutes of streaming for $1/month.
I have 717 minutes stored and I used less than 1000 minutes last month - This cost me $6.
<p>
Please contribute if you listen</code>

<form action="https://www.paypal.com/donate" method="post" target="_top">
<input type="hidden" name="business" value="7ACWGCVBT455L" />
<input type="hidden" name="no_recurring" value="0" />
<input type="hidden" name="currency_code" value="USD" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>

<pre>
1) I have a set of mp3s to upload to Cloudflare. they have a web based admin page, but that is only one at a time.
 they have an api, so here is a bash script for batch upload

You need your Account Number, API Key, and email address.
<code>
# upload all files
declare -x ACCOUNT=youraccountnumber
declare -x KEY=yourapikey
declare -x EMAIL=youremailahere@gmail.com
for f in *.mp4 ; \
do curl -X POST  -F file=@$f https://api.cloudflare.com/client/v4/$ACCOUNT/stream \
 -H "X-Auth-Key: $KEY" \
 -H "X-Auth-Email: $EMAIL"  ; done
</code>

And here is the list script
<code>
# list all files
declare -x ACCOUNT=youraccountnumber
declare -x KEY=yourapikey
declare -x EMAIL=youremailahere@gmail.com
curl  -s -X GET "https://api.cloudflare.com/client/v4/accounts/$ACCOUNT/stream"\
 -H "X-Auth-Key: $KEY"\
 -H "X-Auth-Email: $EMAIL"

</code>


So now i have a list of uuids
Use jquery to construct an html fragment
So now how to publish this? - Cloudflare Pages
One page
First announce your intentions
Then show the default vid
Then insert the html fragment with the links and thumbnails
voila
<pre>





  </div>
<div><h1><a href="http://danglingganglion.com">You Must Listen to Dangling Ganglion</a></h1></div>



</body>
</html>
